# Git basic commands

* [Documentation](#documentation)     
* [Initialization](#initialisation)   
* [git flow](#git-flow)      
* [Tree](#tree)     
* [Add and validate](#add-and-validate)     
* [Sending updates](#sending-updates)     
* [Branches](#branches)     
* [Push new branche to remote](#push-new-branch-to-remote)     
* [Update and merge](#update-and-merge)     
* [Change remote url](#change-remote-url)     
* [Tags](#tags)     
* [gitignore](#gitignore)     

## Documentation 

https://www.atlassian.com/fr/git/tutorials/using-branches/git-checkout

## Initialization

### Create repos

In your app folder, initialize your git repos with :

```
git init
```

### Clone repos

To create a local copy of your repos :

```
git clone /path/to/repository
```

To get a remote repos (on github, bitbucket, gitlab, git server...) :

```
git clone username@host:/path/to/repository
```

## git flow

It's recommanded to create the following basic git flow in your projects

**2 main branches**

- **master** which is the last version of your application in production
- **develop** the current working branch

> important : **master** and **develop** must not be modified directly. You must merge on it from the 4 following branches

**4 types of working branches**

- **feature** : create one feature branch for each feature, named like "feature/<feature-name>". this branch is based on **develop** and must be merged on **develop** 
- **hotfix** : for fixing bug in production, named like "hotfix/<fix-name>". this branch is base on **master** and must be merged on **master AND develop**
- **fix** : for fixing bug in current working branch, named like "fix/<fix-name>". this branch is based on **develop** and must be merged on **develop**
- **release** : named like "release/<release-name>" (ex : release/mvp). this branch is based on **develop** and must be merged on **develop AND master**
  
> info : naming your branches with **/** will create a tree to regroup your branches 

### initialize git flow

To initialize git flow in your project, just run the following command and choose your branches prefix (it is recommanded to keep the suggested prefix)

````
git flow init
````

*Commands to create branches*
````
git flow feature start <Nom de la feature>
git flow release start <Numéro de la release>
git flow bugfix start <Numéro du bug>
git flow hotfix start <Nom du bug>

````
  
## Tree

Your local repos is composed of 3 "trees" generated by git
* The first is your workspace which contains your files
* The second is an Index which is a transit area for your files
* Finally the **Head** which pointing on the last commit

Working dir --- add ---> index (stage) --- commit --> HEAD

## Add and validate
[Back to top](#git-basic-commands)     

To add a file to the index, use 

```
git add <file name>

or 

git add *
```

It is the first step in the basic git workflow. Then to validate some updates :

```
git commit -m "your commit message. be explicit"
```

It will add your file to the **Head** but the file si not yet in your remote repos

## Sending updates
[Back to top](#git-basic-commands)     

Now you have to send your **Head** in your remote repos

```
git push origin <branch name>

git push origin master
```

If you have not cloned your existing repos and would to connect it with your remote repos, you have to add it before :

```
git remote add origin
```

## Branches
[Back to top](#git-basic-commands)     

Branches allows you to work on specific features without impact the rest of your project

By default, the **master** branch is created by the init. Then you you can create all the branches you want, but don't forget to merge them with the master when you have finished.

### Get all branches

```
git fetch --all
```

### Create branch

```
git checkout -b <branch name>
```

### Back to master

```
git checkout master
```

### Delete branch

```
git branch -d <branch name>
```

> A new branch is not visible for other users as long as you have not push it on origin

```
git push origin
```

## Push new branch to remote
[Back to top](#git-basic-commands)     

What to do if you get a *git no upstream configured for branch 'myNewBranch'* error
```
git branch --set-upstream-to=origin/master myNewBranch
```

And push your new branch to your remote repos
```
git push -u origin myNewBranch
```

## Update and Merge
[Back to top](#git-basic-commands)     

### Update local repos

```
git pull
```

### Merge branches

If you want to merge your **dev** branch to your **master**, first switch to target branch (here **master**) and do a merge with the branch to merge

```
git checkout master
git merge dev
git push
```

### Merge conflicts
Git will automatically merge updates. But sometimes there are some merge conflicts to resolve manually.

After you have resolve all conflicts, you have to add them
```
git add
```

To get an overview of updates
```
git diff
```

## Change remote URL
[Back to top](#git-basic-commands)     

https://git-scm.com/book/fr/v2/Les-bases-de-Git-Travailler-avec-des-d%C3%A9p%C3%B4ts-distants

To show all remote
````
git remote -v
````

### Set the new url

To change your remote url
````
set-url origin <my-new-url>
````

## Tags
[Back to top](#git-basic-commands)     

It is recommanded to create tag to identify your releases.

List all tags of the current branch

````
git tag
````

### Create single tag

Tag the current commit 
````
git tag v1.0.0
````

### Create single tag on specific commit

First, get the first 10 characters of your last commit id (you can use other string as id but the id must be unique)

```
// show all commits
git log --pretty=oneline

git tag 1.0.0 1b2e1d63ff
```

### Push tag on remote repository

By default, git push doesn't push your tags. You must explicitly push your tag like below :

````
// push specific tag
git push origin <tag-name>

// or using --tags option to push all your tags in one push
git push origin --tags
````

## Replace local updates
[Back to top](#git-basic-commands)     

In case of you have make a mistake in your work tree, you can cancel your local updates with :

```
git checkout -
```

This will replace the updates in your work tree with the last **Head** content. Note that all added (wrong) updates will be kept by the index.

If you want delete all updates and local values, get the last history from the remote server and point to the main local branch on it like


```
git fetch origin
git reset -hard origin/master
```

## gitignore

[large collection of gitignore files](https://github.com/github/gitignore)       
